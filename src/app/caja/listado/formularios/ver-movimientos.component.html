<div class="card">
  <div class="card-header card-header-icon">
    <div class="card-icon cardHeader">
      <i class="material-icons">equalizer</i>
    </div>
    <h4 class="card-title">Movimientos
      <button mat-icon-button class="close" (click)="close()">
        <i class="material-icons">close</i> </button>
    </h4>
  </div>
  <br>
  <div class="card-body">
    <div class="row">
      <mat-form-field class="col-sm-3">
        <input matInput type="text" value="" style="text-transform:uppercase;" placeholder="Personal:"
          [(ngModel)]="params.nombreEmpleado" name="empleado" #empleado="ngModel" readonly>
      </mat-form-field>
      <mat-form-field class="col-sm-3">
        <input matInput type="text" value="" style="text-transform:uppercase;" placeholder="Descripción Apertura"
          [(ngModel)]="params.descripcionApertura" name="descripcionApertura" #descripcionApertura="ngModel" readonly>
      </mat-form-field>
      <mat-form-field class="col-sm-3">
        <input matInput type="text" value="" style="text-transform:uppercase;" placeholder="Monto Apertura"
          [(ngModel)]="montoApertura" name="apertura" #apertura="ngModel" readonly>
      </mat-form-field>
      <mat-form-field class="col-sm-3">
        <input matInput type="text" value="" style="text-transform:uppercase;" placeholder="Balance"
          [(ngModel)]="montoFinal" name="balance" #balance="ngModel" readonly>
      </mat-form-field>
    </div>
    <br>
    <div class="material-datatables table-responsive" *ngIf="cobranzaList.length!=0">
      <h5 class="col-auto"><strong>Cobranzas</strong></h5>
      <table id="dtResultado" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%"
        style="width:100%">
        <thead class="cabeceraTable">
          <tr>
            <th class="text-center">Cliente</th>
            <th class="text-center">Fecha</th>
            <th class="text-center">Monto</th>
            <th class="text-center">Tipo de Pago</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let eleme of cobranzaList">
            <td class="text-center">{{eleme.descripcion}} </td>
            <td class="text-center">{{eleme.fecha}}</td>
            <td class="text-center">{{eleme.monto | currency: 'S/'}}</td>
            <td class="text-center">{{eleme.tipoPago}}</td>
          </tr>
        </tbody>
      </table>
      <div class="col-12 text-right">
        <h5 class="col-auto"> Total Cobranza: {{ sumaCobranza | currency: 'S/' }}</h5>
      </div>
      <br>
    </div>

    <div class="material-datatables table-responsive" *ngIf="prestamoList.length!=0">
      <h5 class="col-auto"><strong>Préstamos</strong></h5>
      <table id="dtResultado" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%"
        style="width:100%">
        <thead class="cabeceraTable">
          <tr>
            <th class="text-center">Cliente</th>
            <th class="text-center">Fecha</th>
            <th class="text-center">Monto</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let el of prestamoList">
            <td class="text-center">{{el.descripcion}} </td>
            <td class="text-center">{{el.fecha}}</td>
            <td class="text-center">{{el.monto | currency: 'S/'}}</td>
          </tr>
        </tbody>
      </table>
      <div class="col-12 text-right">
        <h5 class="col-auto"> Total Préstamos: {{ sumaPrestamo | currency: 'S/' }}</h5>
      </div>
      <br>
    </div>

    <div class="material-datatables table-responsive" *ngIf="gastosList.length!=0">
      <h5 class="col-auto"><strong>Gastos</strong></h5>
      <table id="dtResultado" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%"
        style="width:100%">
        <thead class="cabeceraTable">
          <tr>
            <th class="text-center">Gasto</th>
            <th class="text-center">Fecha</th>
            <th class="text-center">Monto</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let element of gastosList">
            <td class="text-center">{{element.descripcion}} </td>
            <td class="text-center">{{element.fecha}}</td>
            <td class="text-center">{{element.monto | currency: 'S/'}}</td>
          </tr>
        </tbody>
      </table>
      <div class="col-12 text-right">
        <h5 class="col-auto"> Total Gastos: {{ sumaGastos | currency: 'S/' }}</h5>
      </div>
      <br>
    </div>
    <div class="text-right">
      <button mat-raised-button="" *ngIf="prestamoList.length!=0 || cobranzaList.length!=0 || gastosList.length!=0"
        (click)="imprimir()" type="button" class="btn btn-fill printing btn-sm btn-primary" matTooltip="Imprimir">
        <i class="material-icons">print</i>
      </button>&nbsp;
      <button mat-raised-button="" (click)="close()" type="button" class="btn btn-fill cerrar btn-sm btn-primary"
        matTooltip="Cerrar">
        <i class="material-icons">close</i>
      </button>
    </div>
  </div>
</div>


<div style="display:none">
  <div id="print-section-material" style="font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 18px; ">
    <div style="display:flex;">
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tbody>
          <tr>
            <td width="30%">
              <div style="margin-bottom: 5px;padding-left: 20%;">
                <img style="height: 100px; width: 150px;"
                  src="{{logo ? logo : './assets/img/credismart/icono_credi.jpeg'}}">
              </div>
            </td>
            <td width="40%">
              <div
                style="text-align: center; font-family: Arial, Helvetica, 'sans-serif'; color: #212121;  font-size: 28px;line-height: 35px; ">
                {{nombre}}<br>
                {{dir}}<br>
                Tlf: {{tel}}
              </div>
            </td>
            <td width="30%">
              <div
                style="text-align: center; font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 20px; line-height: 20px;">
                <strong>Fecha:</strong> {{fecha_str}}<br>
                <strong>Hora: </strong>{{hora}} <br>
              </div>
            </td>
          </tr>
          <br>
        </tbody>
        <br>
      </table>
    </div>
    <div
      style="font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 24px; margin-top: 20px; text-align: CENTER; line-height: 18px">
      <strong style="display: inline-table">MOVIMIENTOS</strong><br><br>
    </div>
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tbody>
        <tr>
          <td width="50%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 20px;  padding: 15px; text-align: center; line-height: 28px">
              <strong>Personal: </strong>{{params.nombreEmpleado}}<br>
              <strong>Monto de Apertura: </strong>{{montoApertura}}
            </div>
          </td>
          <td width="50%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 20px;  padding: 15px; text-align: center; line-height: 28px">
              <strong>Descripción de Apertura: </strong>{{params.descripcionApertura}}<br>
              <strong>Balance: </strong>{{montoFinal}}
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="cobranzaList.length!=0"
      style="font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px; padding: 15px; text-align: left; line-height: 12px">
      <strong style="display: inline-table">COBRANZAS</strong><br><br>
    </div>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" *ngIf="cobranzaList.length!=0">
      <thead style="background-color:#1d5ea0; color:white;text-transform: uppercase;">
        <tr>
          <th width="25%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 12px; text-align: center; line-height: 28px; font-weight: bold">
              Cliente</div>
          </th>
          <th width="25%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 12px; text-align: center; line-height: 28px; font-weight: bold">
              Fecha</div>
          </th>
          <th width="25%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 12px; text-align: center; line-height: 28px; font-weight: bold">
              Monto</div>
          </th>
          <th width="25%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 12px; text-align: center; line-height: 28px; font-weight: bold">
              Tipo de Pago</div>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of cobranzaList">
          <td width="25%" align="center"
            style="border-bottom: solid 1px #ddd; max-width: 300px; overflow-wrap: break-word;font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center;">
            {{row.descripcion}}
          </td>
          <td width="25%" align="right"
            style="border-bottom: solid 1px #ddd; font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center; ">
            {{row.fecha}}
          </td>
          <td width="25%" align="center"
            style="border-bottom: solid 1px #ddd; font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center;text-transform: uppercase">
            {{row.monto | currency: 'S/'}}
          </td>
          <td width="25%" align="center"
            style="border-bottom: solid 1px #ddd; font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center;text-transform: uppercase">
            {{row.tipoPago}}
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="cobranzaList.length!=0"
      style="font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 20px;  padding: 15px; text-align: right; line-height: 18px">
      <strong style="display: inline-table;text-transform: uppercase;">
        Total Cobranza: {{ sumaCobranza | currency: 'S/' }}</strong><br>
    </div>
    <div *ngIf="prestamoList.length!=0"
      style="font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px; padding: 15px; text-align: left; line-height: 12px">
      <strong style="display: inline-table">PRÉSTAMOS</strong><br><br>
    </div>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" *ngIf="prestamoList.length!=0">
      <thead style="background-color:#1d5ea0; color:white;text-transform: uppercase;">
        <tr>
          <td width="35%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 5px; text-align: center; line-height: 28px;font-weight: bold">
              Cliente</div>
          </td>
          <td width="35%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 5px; text-align: center; line-height: 28px;font-weight: bold">
              Fecha</div>
          </td>
          <td width="35%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 5px; text-align: center; line-height: 28px;font-weight: bold">
              Monto</div>
          </td>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of prestamoList">
          <td width="35%" align="center"
            style="border-bottom: solid 1px #ddd; max-width: 300px; overflow-wrap: break-word;font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center;">
            {{row.descripcion}}
          </td>
          <td width="35%" align="right"
            style="border-bottom: solid 1px #ddd; font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center; ">
            {{row.fecha}}

          </td>
          <td width="35%" align="center"
            style="border-bottom: solid 1px #ddd; font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center;text-transform: uppercase">
            {{row.monto | currency: 'S/'}}
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="prestamoList.length!=0"
      style="font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 20px;  padding: 15px; text-align: right; line-height: 18px">
      <strong style="display: inline-table;text-transform: uppercase;">Total Préstamos:
        {{ sumaPrestamo | currency: 'S/' }}</strong><br>
    </div>
    <div *ngIf="gastosList.length!=0"
      style="font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px; padding: 15px; text-align: left; line-height: 12px">
      <strong style="display: inline-table">GASTOS</strong><br><br>
    </div>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" *ngIf="gastosList.length!=0">
      <thead style="background-color:#1d5ea0; color:white;text-transform: uppercase;">
        <tr>
          <th width="35%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 5px; text-align: center; line-height: 28px;font-weight: bold">
              Gasto</div>
          </th>
          <th width="35%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 5px; text-align: center; line-height: 28px;font-weight: bold">
              Fecha</div>
          </th>
          <th width="35%">
            <div
              style="font-family: Arial, Helvetica, 'sans-serif'; font-size: 18px; padding: 5px; text-align: center; line-height: 28px;font-weight: bold">
              Monto</div>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of gastosList">
          <td width="35%" align="center"
            style="border-bottom: solid 1px #ddd; max-width: 300px; overflow-wrap: break-word;font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center;">
            {{row.descripcion}}
          </td>
          <td width="35%" align="right"
            style="border-bottom: solid 1px #ddd; font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center; ">
            {{row.fecha}}
          </td>
          <td width="35%" align="center"
            style="border-bottom: solid 1px #ddd; font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 18px;  padding: 20px; text-align: center;text-transform: uppercase">
            {{row.monto | currency: 'S/'}}
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="gastosList.length!=0"
      style="font-family: Arial, Helvetica, 'sans-serif'; color: #212121; font-size: 20px;  padding: 15px; text-align: right; line-height: 18px">
      <strong style="display: inline-table;text-transform: uppercase;">Total Gastos:
        {{ sumaGastos | currency: 'S/' }}</strong><br><br>
    </div>
  </div>
</div>